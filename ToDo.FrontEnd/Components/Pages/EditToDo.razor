@page "/edittask"
@using ToDo.FrontEnd.Clients
@using ToDo.FrontEnd.Models

<PageTitle>New Task</PageTitle>

<div class="row px-4 justify-content-center">
  <div class="col-md-6 center">
    <h3>New Task</h3> 
    <EditForm Model="@task" FormName="editTask" OnSubmit="HandleSubmit">
      <div class="mb-3">
        <InputText id="title" placeholder="Title" @bind-Value="task.Title" class="form-control bg-dark text-white" />
      </div>
      <div class="mb-3">
        <InputTextArea id="description" placeholder="description" @bind-Value="task.Description"
          class="form-control bg-dark text-white" />
      </div>
      <div class="mb-3">
        <InputSelect id="priority" @bind-Value="task.Priority" class="form-select bg-dark text-white">
          <option value="">Select a priority</option>
          <option class="bg-danger" value="High">High</option>
          <option class="bg-warning" value="Medium">Medium</option>
          <option class="bg-success" value="Low">Low</option>
        </InputSelect>
      </div>
      <button type="submit" class="btn btn-primary w-100">Add Task</button>
    </EditForm>
  </div>
</div>
@code {
  [SupplyParameterFromForm]
  private Models.Task task { get; set; } = new()
  {
    Title = ""
  };

  private TasksClient tasksClient = new TasksClient();
  private List<Models.Task>? tasks;

  protected override void OnInitialized()
  {
    tasks = tasksClient.GetTasks();
  }

  private void HandleSubmit() 
  {
    tasksClient.AddTask(task);
  }
}